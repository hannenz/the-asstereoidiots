{"version":3,"sources":["downloadcodes.js"],"names":["$","$form","url","attr","$input","$submitBtn","find","on","ev","this","value","length","focus","keyup","preventDefault","data","serialize","addClass","post","_response","removeClass","response","JSON","parse","get","$newForm","insertAfter","$btn","replaceWith"],"mappings":";;;;;;;;AAAAA,EAAA,WAEA,IAAAC,EAAAD,EAAA,0BACAE,EAAAD,EAAAE,KAAA,UACAC,EAAAJ,EAAA,qBACAK,EAAAJ,EAAAK,KAAA,uBAEAF,EAAAG,GAAA,QAAA,SAAAC,GACAH,EAAAF,KAAA,WAAAM,KAAAC,MAAAC,OAAA,GACA,GAAAF,KAAAC,MAAAC,QACAN,EAAAO,UAGAR,EAAAS,QAIAZ,EAAAM,GAAA,SAAA,SAAAC,GAwCA,OAtCAA,EAAAM,iBAEAC,KAAAd,EAAAe,YACAZ,EAAAD,KAAA,YAAA,GACAF,EAAAgB,SAAA,QAOAjB,EAAAkB,KAAAhB,EAAAa,KAAA,SAAAI,GAEAlB,EAAAmB,YAAA,QACA,IAAAC,EAAAC,KAAAC,MAAAJ,GAEA,GAAAE,EAAA,QACAjB,EAAAa,SAAA,SAKAZ,EAAAF,KAAA,YAAA,GAEAH,EAAAwB,IAAA,yBAAA,SAAAL,GACAM,SAAAzB,EAAAmB,GAAAb,KAAA,QACAmB,SAAAC,YAAAzB,SAGA,CACAG,EAAAa,SAAA,WACA,IAAAU,EAAA3B,EAAA,yCACA2B,EAAAV,SAAA,UACAZ,EAAAuB,YAAAD,GACAA,EAAAf,YAIA","file":"main.min.js","sourcesContent":["$(function () {\n\n\tvar $form = $('#DownloadCodeIndexForm');\n\tvar url = $form.attr('action');\n\tvar $input = $('#DownloadCodeCode');\n\tvar $submitBtn = $form.find ('button[type=submit]');\n\n\t$input.on ('keyup', function (ev) {\n\t\t$submitBtn.attr('disabled', (this.value.length < 8));\n\t\tif (this.value.length == 8) {\n\t\t\t$submitBtn.focus ();\n\t\t}\n\t});\n\t$input.keyup ();\n\n\n\n\t$form.on ('submit', function (ev) {\n\n\t\tev.preventDefault ();\n\n\t\tdata = $form.serialize ();\n\t\t$input.attr('disabled', true);\n\t\t$form.addClass ('busy');\n\n\t\t// setTimeout (sendForm, 1500);\n\t\tsendForm ();\n\n\t\tfunction sendForm () {\n\n\t\t\t$.post (url, data, function (_response) {\n\n\t\t\t\t$form.removeClass ('busy');\n\t\t\t\tvar response = JSON.parse (_response);\n\n\t\t\t\tif (response['success']) {\n\t\t\t\t\t$input.addClass ('valid');\n\n\t\t\t\t\t// var $btn = $('<a href=\"/download_codes/download\">Click here to download your files</a>');\n\t\t\t\t\t// $btn.addClass ('button');\n\t\t\t\t\t// $submitBtn.replaceWith ($btn);\n\t\t\t\t\t$submitBtn.attr ('disabled', true);\n\n\t\t\t\t\t$.get ('/download_codes/choose', function (_response) {\n\t\t\t\t\t\t$newForm = $(_response).find ('form');\n\t\t\t\t\t\t$newForm.insertAfter ($form);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t$input.addClass('invalid');\n\t\t\t\t\tvar $btn = $('<a href=\"/dirty\">Nope. Try again.</a>');\n\t\t\t\t\t$btn.addClass ('button');\n\t\t\t\t\t$submitBtn.replaceWith ($btn);\n\t\t\t\t\t$btn.focus ();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn false;\n\t});\n});\n\n"]}